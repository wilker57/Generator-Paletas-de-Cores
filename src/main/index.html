<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Paletas de Cores</title>
    <style>
        :root {
            --primary: #5928e5;
            --dark: #333;
            --light: #f5f5f5;
            --shadow: rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light);
            color: var(--dark);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background-color: white;
            box-shadow: 0 2px 10px var(--shadow);
            padding: 1.5rem 0;
            text-align: center;
        }

        header h1 {
            color: var(--primary);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        header p {
            color: #666;
            font-size: 1rem;
        }

        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
            flex: 1;
            width: 100%;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        button {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        button:hover {
            background-color: #4a1fd0;
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        .color-palette {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
            min-height: 200px;
            transition: opacity 0.3s ease;
        }

        .color-card {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px var(--shadow);
            transition: var(--transition);
        }

        .color-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .color-display {
            height: 150px;
            width: 100%;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .color-display:hover {
            transform: scale(1.05);
        }

        .color-info {
            padding: 1rem;
            text-align: center;
        }

        .color-code {
            font-family: monospace;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        .color-name {
            color: #666;
            font-size: 0.9rem;
        }

        .copy-message {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .saved-palettes {
            margin-top: 3rem;
        }

        .saved-palettes h2 {
            margin-bottom: 1.5rem;
            text-align: center;
            color: var(--primary);
        }

        .palette-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .saved-palette {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px var(--shadow);
            position: relative;
        }

        .delete-palette {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(255, 255, 255, 0.8);
            color: #ff3333;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.2rem;
            z-index: 10;
            transition: var(--transition);
        }

        .delete-palette:hover {
            background-color: #ff3333;
            color: white;
        }

        .palette-colors {
            display: flex;
            height: 120px;
        }

        .palette-colors div {
            flex: 1;
        }

        .palette-info {
            padding: 1rem;
            text-align: center;
            font-size: 0.9rem;
            color: #666;
        }

        .empty-state {
            text-align: center;
            padding: 2rem;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px var(--shadow);
        }

        .empty-state p {
            color: #666;
            margin-bottom: 1rem;
        }

        footer {
            background-color: var(--dark);
            color: white;
            text-align: center;
            padding: 1.5rem;
            margin-top: auto;
        }

        footer p {
            font-size: 0.9rem;
        }

        footer a {
            color: var(--primary);
            text-decoration: none;
        }

        @media (max-width: 768px) {
            .color-palette {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
        }

        /* Carregamento */
        .loader {
            display: none;
            margin: 2rem auto;
            text-align: center;
        }

        .loader div {
            display: inline-block;
            width: 15px;
            height: 15px;
            background-color: var(--primary);
            border-radius: 50%;
            margin: 0 5px;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .loader div:nth-child(1) {
            animation-delay: -0.32s;
        }

        .loader div:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes bounce {
            0%, 80%, 100% {
                transform: scale(0);
            }
            40% {
                transform: scale(1);
            }
        }

        /* Modo escuro */
        .dark-mode {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--dark);
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
        }

        .dark-mode:hover {
            transform: scale(1.1);
        }

        body.dark {
            background-color: #1a1a1a;
            color: var(--light);
        }

        body.dark header {
            background-color: #222;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        body.dark header p {
            color: #ccc;
        }

        body.dark .color-card, 
        body.dark .saved-palette,
        body.dark .empty-state {
            background-color: #2a2a2a;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        body.dark .color-name,
        body.dark .palette-info {
            color: #bbb;
        }
    </style>
</head>
<body>
    <header>
        <h1>Gerador de Paletas de Cores</h1>
        <p>Crie, explore e salve combina√ß√µes de cores para seus projetos</p>
    </header>

    <main>
        <div class="controls">
            <button id="random-palette">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"/>
                    <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"/>
                </svg>
                Gerar Nova Paleta
            </button>
            <button id="save-palette">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 0-1 1v7.293l2.646-2.647a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L7.5 9.293V2a2 2 0 0 1 2-2H14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h2.5a.5.5 0 0 1 0 1H2z"/>
                </svg>
                Salvar Esta Paleta
            </button>
        </div>

        <div class="loader">
            <div></div>
            <div></div>
            <div></div>
        </div>

        <div class="color-palette" id="color-palette">
            <!-- Cores ser√£o geradas dinamicamente aqui -->
        </div>

        <div class="saved-palettes">
            <h2>Paletas Salvas</h2>
            <div class="palette-list" id="saved-palettes-list">
                <!-- Paletas salvas ser√£o exibidas aqui -->
            </div>
        </div>
    </main>

    <div class="dark-mode" id="dark-mode-toggle">
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        </svg>
    </div>

    <footer>
        <p>Desenvolvido com üíú | Inspirado por Color Hunt e The Color API</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elementos da DOM
            const colorPalette = document.getElementById('color-palette');
            const randomPaletteBtn = document.getElementById('random-palette');
            const savePaletteBtn = document.getElementById('save-palette');
            const savedPalettesList = document.getElementById('saved-palettes-list');
            const loader = document.querySelector('.loader');
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            
            // Estado da aplica√ß√£o
            let currentPalette = [];
            let savedPalettes = JSON.parse(localStorage.getItem('savedPalettes')) || [];
            
            // Verificar prefer√™ncia de tema
            if (localStorage.getItem('darkMode') === 'enabled') {
                document.body.classList.add('dark');
                updateDarkModeIcon(true);
            }
            
            // Carregar paletas salvas
            displaySavedPalettes();
            
            // Gerar paleta inicial ao carregar a p√°gina
            generateRandomPalette();
            
            // Adicionar eventos aos bot√µes
            randomPaletteBtn.addEventListener('click', generateRandomPalette);
            savePaletteBtn.addEventListener('click', saveCurrentPalette);
            darkModeToggle.addEventListener('click', toggleDarkMode);
            
            
            // Fun√ß√µes
            function generateRandomPalette() {
                showLoader();
                
                // Limpar a paleta atual
                currentPalette = [];
                colorPalette.innerHTML = '';
                
                // Gerar 5 cores aleat√≥rias
                for (let i = 0; i < 5; i++) {
                    const hue = Math.floor(Math.random() * 360);
                    const saturation = Math.floor(Math.random() * 30) + 70; // 70-100%
                    const lightness = Math.floor(Math.random() * 40) + 50; // 50-90%
                    
                    const hslColor = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
                    const hexColor = hslToHex(hue, saturation, lightness);
                    
                    currentPalette.push({
                        hex: hexColor,
                        name: getColorName(hexColor)
                    });
                }
                
                // Exibir as cores na paleta
                displayCurrentPalette();
                hideLoader();
                
                // Log para debug - verificar que as cores foram geradas
                console.log('Paleta gerada:', currentPalette);
            }
            
            function displayCurrentPalette() {
                // Limpar paleta atual
                colorPalette.innerHTML = '';
                
                // Verificar se temos cores para exibir
                if (currentPalette.length === 0) {
                    colorPalette.innerHTML = '<p style="text-align: center; width: 100%;">Nenhuma cor para exibir. Clique em "Gerar Nova Paleta".</p>';
                    return;
                }
                
                // Exibir cada cor na paleta
                currentPalette.forEach((color, index) => {
                    const colorCard = document.createElement('div');
                    colorCard.className = 'color-card';
                    colorCard.setAttribute('data-index', index);
                    
                    const colorDisplay = document.createElement('div');
                    colorDisplay.className = 'color-display';
                    colorDisplay.style.backgroundColor = color.hex;
                    
                    const copyMessage = document.createElement('div');
                    copyMessage.className = 'copy-message';
                    copyMessage.textContent = 'Copiado!';
                    
                    const colorInfo = document.createElement('div');
                    colorInfo.className = 'color-info';
                    
                    const colorCode = document.createElement('div');
                    colorCode.className = 'color-code';
                    colorCode.textContent = color.hex;
                    
                    const colorName = document.createElement('div');
                    colorName.className = 'color-name';
                    colorName.textContent = color.name;
                    
                    colorDisplay.appendChild(copyMessage);
                    colorInfo.appendChild(colorCode);
                    colorInfo.appendChild(colorName);
                    colorCard.appendChild(colorDisplay);
                    colorCard.appendChild(colorInfo);
                    
                    // Adicionar evento de c√≥pia
                    colorDisplay.addEventListener('click', function() {
                        navigator.clipboard.writeText(color.hex).then(() => {
                            copyMessage.style.opacity = '1';
                            setTimeout(() => {
                                copyMessage.style.opacity = '0';
                            }, 1500);
                        });
                    });
                    
                    colorPalette.appendChild(colorCard);
                });
                
                // Log para debug
                console.log('Paleta exibida na tela:', currentPalette);
            }
            
            function saveCurrentPalette() {
                if (currentPalette.length === 0) return;
                
                const timestamp = new Date().toLocaleString();
                const newPalette = {
                    id: Date.now(),
                    colors: [...currentPalette],
                    date: timestamp
                };
                
                savedPalettes.unshift(newPalette);
                localStorage.setItem('savedPalettes', JSON.stringify(savedPalettes));
                
                displaySavedPalettes();
                
                // Feedback visual ao usu√°rio
                savePaletteBtn.textContent = 'Paleta Salva!';
                setTimeout(() => {
                    savePaletteBtn.innerHTML = `
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 0-1 1v7.293l2.646-2.647a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L7.5 9.293V2a2 2 0 0 1 2-2H14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h2.5a.5.5 0 0 1 0 1H2z"/>
                        </svg>
                        Salvar Esta Paleta
                    `;
                }, 2000);
            }
            
            function displaySavedPalettes() {
                if (savedPalettes.length === 0) {
                    savedPalettesList.innerHTML = `
                        <div class="empty-state">
                            <p>Voc√™ ainda n√£o salvou nenhuma paleta.</p>
                            <button id="create-first-palette">Criar Minha Primeira Paleta</button>
                        </div>
                    `;
                    
                    document.getElementById('create-first-palette').addEventListener('click', generateRandomPalette);
                    return;
                }
                
                savedPalettesList.innerHTML = '';
                
                savedPalettes.forEach(palette => {
                    const paletteElement = document.createElement('div');
                    paletteElement.className = 'saved-palette';
                    
                    const deleteBtn = document.createElement('div');
                    deleteBtn.className = 'delete-palette';
                    deleteBtn.textContent = '√ó';
                    deleteBtn.addEventListener('click', () => deletePalette(palette.id));
                    
                    const paletteColors = document.createElement('div');
                    paletteColors.className = 'palette-colors';
                    
                    palette.colors.forEach(color => {
                        const colorDiv = document.createElement('div');
                        colorDiv.style.backgroundColor = color.hex;
                        colorDiv.addEventListener('click', () => {
                            navigator.clipboard.writeText(color.hex);
                        });
                        paletteColors.appendChild(colorDiv);
                    });
                    
                    const paletteInfo = document.createElement('div');
                    paletteInfo.className = 'palette-info';
                    paletteInfo.textContent = `Salvo em: ${palette.date}`;
                    
                    paletteElement.appendChild(deleteBtn);
                    paletteElement.appendChild(paletteColors);
                    paletteElement.appendChild(paletteInfo);
                    
                    savedPalettesList.appendChild(paletteElement);
                });
            }
            
            function deletePalette(id) {
                savedPalettes = savedPalettes.filter(palette => palette.id !== id);
                localStorage.setItem('savedPalettes', JSON.stringify(savedPalettes));
                displaySavedPalettes();
            }
            
            function toggleDarkMode() {
                const isDarkMode = document.body.classList.toggle('dark');
                updateDarkModeIcon(isDarkMode);
                localStorage.setItem('darkMode', isDarkMode ? 'enabled' : 'disabled');
            }
            
            function updateDarkModeIcon(isDark) {
                if (isDark) {
                    darkModeToggle.innerHTML = `
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
                        </svg>
                    `;
                } else {
                    darkModeToggle.innerHTML = `
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
                        </svg>
                    `;
                }
            }
            
            function showLoader() {
                loader.style.display = 'block';
            }
            
            function hideLoader() {
                loader.style.display = 'none';
            }
            
            // Fun√ß√µes utilit√°rias
            function hslToHex(h, s, l) {
                l /= 100;
                const a = s * Math.min(l, 1 - l) / 100;
                const f = n => {
                    const k = (n + h / 30) % 12;
                    const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
                    return Math.round(255 * color).toString(16).padStart(2, '0');
                };
                return `#${f(0)}${f(8)}${f(4)}`;
            }
            
            function getColorName(hexColor) {
                // Fun√ß√£o simplificada para gerar nomes de cores
                // Em uma aplica√ß√£o real, voc√™ poderia utilizar uma API de cores
                const r = parseInt(hexColor.slice(1, 3), 16);
                const g = parseInt(hexColor.slice(3, 5), 16);
                const b = parseInt(hexColor.slice(5, 7), 16);
                
                // Calcular luminosidade
                const luminance = 0.299 * r + 0.587 * g + 0.114 * b;
                
                // Determinar tons b√°sicos
                const max = Math.max(r, g, b);
                const min = Math.min(r, g, b);
                
                if (max - min < 30) {
                    // Tons de cinza
                    if (luminance < 40) return "Carv√£o";
                    if (luminance < 80) return "Grafite";
                    if (luminance < 120) return "Cinza";
                    if (luminance < 180) return "Prata";
                    if (luminance < 220) return "Platina";
                    return "Branco";
                }
                
                if (r > g && r > b) {
                    if (g > b) {
                        if (r - g < 50) return "√Çmbar";
                        return "Laranja";
                    }
                    if (luminance < 100) return "Borgonha";
                    if (luminance < 150) return "Carmim";
                    return "Vermelho";
                }
                
                if (g > r && g > b) {
                    if (Math.abs(r - b) < 50) {
                        if (luminance < 100) return "Floresta";
                        return "Turquesa";
                    }
                    if (luminance < 100) return "Musgo";
                    if (luminance < 150) return "Esmeralda";
                    return "Verde";
                }
                
                if (b > r && b > g) {
                    if (r > g) {
                        if (luminance < 100) return "√çndigo";
                        return "Violeta";
                    }
                    if (luminance < 100) return "Marinho";
                    if (luminance < 150) return "Cobalto";
                    return "Azul";
                }
                
                return "Cor mista";
            }
            
            // Integra√ß√£o com API de cores (The Color API)
            async function fetchPaletteFromAPI() {
                try {
                    showLoader();
                    colorPalette.innerHTML = '<p style="text-align: center; width: 100%;">Buscando paleta da API...</p>';
                    
                    // Na implementa√ß√£o real, voc√™ faria uma chamada fetch para API
                    // Exemplo com a The Color API:
                    // const response = await fetch('https://www.thecolorapi.com/scheme?hex=0047AB&mode=analogic&count=5');
                    // const data = await response.json();
                    
                    // Por enquanto, vamos simular uma resposta para demonstra√ß√£o
                    await new Promise(resolve => setTimeout(resolve, 1200));
                    
                    // Simulando dados de API
                    const schemes = ['analogic', 'monochromatic', 'triad', 'complementary', 'compound'];
                    const randomScheme = schemes[Math.floor(Math.random() * schemes.length)];
                    
                    // Cor base aleat√≥ria
                    const baseHue = Math.floor(Math.random() * 360);
                    const baseSat = Math.floor(Math.random() * 20) + 80; // 80-100%
                    const baseLightness = Math.floor(Math.random() * 30) + 50; // 50-80%
                    
                    // Gerar paleta baseada no esquema
                    const apiPalette = [];
                    
                    switch (randomScheme) {
                        case 'analogic':
                            // Cores an√°logas (pr√≥ximas no c√≠rculo crom√°tico)
                            for (let i = 0; i < 5; i++) {
                                const hue = (baseHue + (i - 2) * 20 + 360) % 360;
                                const sat = baseSat - (Math.abs(i - 2) * 5);
                                const light = baseLightness + (Math.abs(i - 2) * 3);
                                const hex = hslToHex(hue, sat, light);
                                apiPalette.push({
                                    hex: hex,
                                    name: getColorName(hex)
                                });
                            }
                            break;
                            
                        case 'monochromatic':
                            // Varia√ß√µes de uma mesma cor
                            for (let i = 0; i < 5; i++) {
                                const light = 90 - (i * 15);
                                const hex = hslToHex(baseHue, baseSat, light);
                                apiPalette.push({
                                    hex: hex,
                                    name: getColorName(hex)
                                });
                            }
                            break;
                            
                        case 'triad':
                            // Cores em uma tr√≠ade (separadas por 120¬∞)
                            for (let i = 0; i < 5; i++) {
                                const triadIndex = Math.floor(i / 2);
                                const hue = (baseHue + triadIndex * 120) % 360;
                                const light = baseLightness + (i % 2 === 0 ? -10 : 10);
                                const hex = hslToHex(hue, baseSat, light);
                                apiPalette.push({
                                    hex: hex,
                                    name: getColorName(hex)
                                });
                            }
                            break;
                            
                        case 'complementary':
                            // Cor e sua complementar (oposta no c√≠rculo crom√°tico)
                            for (let i = 0; i < 5; i++) {
                                const isComplement = i >= 3;
                                const hue = isComplement ? (baseHue + 180) % 360 : baseHue;
                                const light = baseLightness + ((i % 3) - 1) * 15;
                                const hex = hslToHex(hue, baseSat, light);
                                apiPalette.push({
                                    hex: hex,
                                    name: getColorName(hex)
                                });
                            }
                            break;
                            
                        case 'compound':
                            // Esquema composto (an√°logas + complementar)
                            for (let i = 0; i < 5; i++) {
                                let hue;
                                if (i === 4) {
                                    // Complementar
                                    hue = (baseHue + 180) % 360;
                                } else {
                                    // An√°logas
                                    hue = (baseHue + (i - 2) * 15 + 360) % 360;
                                }
                                const hex = hslToHex(hue, baseSat, baseLightness);
                                apiPalette.push({
                                    hex: hex,
                                    name: getColorName(hex)
                                });
                            }
                            break;
                    }
                    
                    // Atualizar a paleta atual com os dados da API
                    currentPalette = apiPalette;
                    
                    // Mostrar um toast com o tipo de esquema
                    showSchemeToast(randomScheme);
                    
                    // Exibir cores
                    displayCurrentPalette();
                    
                } catch (error) {
                    console.error('Erro ao buscar paleta da API:', error);
                    colorPalette.innerHTML = `
                        <div style="text-align: center; width: 100%; padding: 2rem;">
                            <p>N√£o foi poss√≠vel obter paletas da API. Gerando localmente...</p>
                        </div>
                    `;
                    // Fallback para paleta gerada localmente
                    setTimeout(generateRandomPalette, 1500);
                } finally {
                    hideLoader();
                }
            }
            
            // Fun√ß√£o para mostrar toast informativo sobre o esquema de cores
            function showSchemeToast(scheme) {
                const schemeNames = {
                    'analogic': 'Cores An√°logas',
                    'monochromatic': 'Monocrom√°tico',
                    'triad': 'Tr√≠ade de Cores',
                    'complementary': 'Cores Complementares',
                    'compound': 'Esquema Composto'
                };
                
                const toast = document.createElement('div');
                toast.style.position = 'fixed';
                toast.style.bottom = '20px';
                toast.style.left = '50%';
                toast.style.transform = 'translateX(-50%)';
                toast.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';
                toast.style.color = 'white';
                toast.style.padding = '10px 20px';
                toast.style.borderRadius = '5px';
                toast.style.zIndex = '1000';
                toast.textContent = `Esquema: ${schemeNames[scheme]}`;
                
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.style.opacity = '0';
                    toast.style.transition = 'opacity 0.5s ease';
                    setTimeout(() => {
                        document.body.removeChild(toast);
                    }, 500);
                }, 2500);
            }
            
            // Adicionar bot√£o para buscar da API
            const apiButton = document.createElement('button');
            apiButton.innerHTML = `
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                </svg>
                Buscar da API
            `;
            apiButton.addEventListener('click', fetchPaletteFromAPI);
            
            // Inserir bot√£o API na interface
            const controlsDiv = document.querySelector('.controls');
            controlsDiv.appendChild(apiButton);
            
            // Adicionar funcionalidade para exportar paleta como imagem
            const exportButton = document.createElement('button');
            exportButton.innerHTML = `
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                    <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                </svg>
                Exportar Paleta
            `;
            exportButton.addEventListener('click', exportPaletteAsImage);
            controlsDiv.appendChild(exportButton);
            
            // Fun√ß√£o para exportar paleta como imagem
            function exportPaletteAsImage() {
                if (currentPalette.length === 0) return;
                
                // Criar um canvas tempor√°rio
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                // Definir tamanho
                const width = 800;
                const height = 400;
                canvas.width = width;
                canvas.height = height;
                
                // Desenhar fundo
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, width, height);
                
                // Desenhar cores
                const colorWidth = width / currentPalette.length;
                
                currentPalette.forEach((color, index) => {
                    ctx.fillStyle = color.hex;
                    ctx.fillRect(index * colorWidth, 0, colorWidth, height * 0.8);
                    
                    // Adicionar c√≥digo de cor
                    ctx.fillStyle = '#333333';
                    ctx.font = 'bold 16px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(color.hex, index * colorWidth + colorWidth / 2, height * 0.9);
                });
                
                // Adicionar marca d'√°gua
                ctx.fillStyle = '#999999';
                ctx.font = '14px Arial';
                ctx.textAlign = 'right';
                ctx.fillText('geradodepaletas.com.br', width - 20, height - 20);
                
                // Converter para URL de dados
                try {
                    const dataUrl = canvas.toDataURL('image/png');
                    
                    // Criar link para download
                    const link = document.createElement('a');
                    link.download = 'minha-paleta-de-cores.png';
                    link.href = dataUrl;
                    link.click();
                } catch (e) {
                    console.error('Erro ao exportar imagem:', e);
                    alert('N√£o foi poss√≠vel exportar a imagem. Tente novamente mais tarde.');
                }
            }
            
            // Adicionar suporte a atalhos de teclado
            document.addEventListener('keydown', function(event) {
                // Ctrl/Cmd + Space = Nova paleta
                if ((event.ctrlKey || event.metaKey) && event.code === 'Space') {
                    event.preventDefault();
                    generateRandomPalette();
                }
                
                // Ctrl/Cmd + S = Salvar paleta
                if ((event.ctrlKey || event.metaKey) && event.code === 'KeyS') {
                    event.preventDefault();
                    saveCurrentPalette();
                }
                
                // Ctrl/Cmd + D = Alternar modo escuro
                if ((event.ctrlKey || event.metaKey) && event.code === 'KeyD') {
                    event.preventDefault();
                    toggleDarkMode();
                }
            });
            
            // Adicionar funcionalidade para bloquear cores individuais
            let lockedColors = new Array(5).fill(false);
            
            function updateColorLockUI() {
                const colorCards = document.querySelectorAll('.color-card');
                
                colorCards.forEach((card, index) => {
                    // Remover lock existente se houver
                    const existingLock = card.querySelector('.color-lock');
                    if (existingLock) {
                        existingLock.remove();
                    }
                    
                    // Criar bot√£o de lock
                    const lockBtn = document.createElement('div');
                    lockBtn.className = 'color-lock';
                    lockBtn.style.position = 'absolute';
                    lockBtn.style.top = '10px';
                    lockBtn.style.right = '10px';
                    lockBtn.style.background = 'rgba(255, 255, 255, 0.7)';
                    lockBtn.style.borderRadius = '50%';
                    lockBtn.style.width = '24px';
                    lockBtn.style.height = '24px';
                    lockBtn.style.display = 'flex';
                    lockBtn.style.alignItems = 'center';
                    lockBtn.style.justifyContent = 'center';
                    lockBtn.style.cursor = 'pointer';
                    lockBtn.style.zIndex = '5';
                    
                    if (lockedColors[index]) {
                        lockBtn.innerHTML = `
                            <svg width="14" height="14" fill="#333" viewBox="0 0 16 16">
                                <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/>
                            </svg>
                        `;
                        lockBtn.title = 'Cor bloqueada - Clique para desbloquear';
                        card.style.boxShadow = '0 0 0 3px #333';
                    } else {
                        lockBtn.innerHTML = `
                            <svg width="14" height="14" fill="#777" viewBox="0 0 16 16">
                                <path d="M11 1a2 2 0 0 0-2 2v4a2 2 0 0 1 2 2h1a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1a2 2 0 0 1 2-2V3a2 2 0 0 0-2-2"></path>
                            </svg>
                        `;
                        lockBtn.title = 'Clique para bloquear esta cor';
                        card.style.boxShadow = '';
                    }
                    
                    lockBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        lockedColors[index] = !lockedColors[index];
                        updateColorLockUI();
                    });
                    
                    card.querySelector('.color-display').appendChild(lockBtn);
                });
            }
            
            // Modificar a fun√ß√£o generateRandomPalette para respeitar cores bloqueadas
            const originalGenerateRandomPalette = generateRandomPalette;
            generateRandomPalette = function() {
                // Se todas as cores estiverem bloqueadas, n√£o fazer nada
                if (lockedColors.every(lock => lock)) {
                    alert('Todas as cores est√£o bloqueadas. Desbloqueie pelo menos uma cor para gerar uma nova paleta.');
                    return;
                }
                
                // Salvar as cores atuais que est√£o bloqueadas
                const savedColors = [];
                currentPalette.forEach((color, index) => {
                    if (lockedColors[index]) {
                        savedColors[index] = color;
                    }
                });
                
                // Gerar nova paleta
                originalGenerateRandomPalette();
                
                // Restaurar as cores bloqueadas
                savedColors.forEach((color, index) => {
                    if (color) {
                        currentPalette[index] = color;
                    }
                });
                
                // Atualizar a UI
                displayCurrentPalette();
                updateColorLockUI();
            };
            
            // Sobrescrever a fun√ß√£o displayCurrentPalette para adicionar os locks
            const originalDisplayCurrentPalette = displayCurrentPalette;
            displayCurrentPalette = function() {
                originalDisplayCurrentPalette();
                updateColorLockUI();
            };
        });